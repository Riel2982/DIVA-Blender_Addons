# DIVA-Blender_Addons
DIVAのモデル編集に活用するBlenderアドオン集。  
コードは **Microsoft Copilot** を使用して生成され、一部調整が加えられています。  
**Blender 3.6** にて検証済み。

## DIVA - Split Mirror Weight
Blender標準機能では対応していない **DIVA独自の左右ボーン名規則** に対応するアドオンです。  

### **使い方**
1. **ウエイトミラーしたいオブジェクトを選択** します。
2. **Nパネル「DIVA」タブ** の **Split Mirror Weight** セクションで **ミラー実行** ボタンをクリックします。
3. 設定に応じて **オリジナルオブジェクトがX軸反転** され、新しいオブジェクトが生成されます。
   - ウエイト（ボーン名）も設定に応じてリネームされます。

### **設定オプション**
- **ボーン識別設定**  
  - ウエイトミラー時に適用する識別文字（`_r_/_l_`）をドロップダウンで選択できます。  
  - 独自のボーン名規則を追加する場合は `bone_patterns.json` を編集してください。  
    （例: `_r_ → _l_` / `.R → .L` / `right_ → left_` など）

- **オリジナル側**  
  - ウエイトミラーの基準となる **オブジェクトが右側か左側か** を選択してください。  
  - メッシュが **X軸の両側** にある場合も反転可能ですが、ウエイトが正しくコピーされているか確認してください。

- **自動ミラー判別**  
  - **ONにすると** オリジナル側の設定に関わらず **アドオン側で自動判別** し、ミラーリングを適用します。  
  - **X軸の両側にメッシュがある場合は適用不可** のため、手動でオリジナル側を指定してください。


## DIVA - Bone Position Rotation Scale  
このアドオンは、**Blenderのアーマチュアからボーンデータ（位置・回転・スケール・親ボーン情報）を取得し、ファイルに保存する** ためのツールです。  
Nパネルの「DIVA」タブから簡単に操作できます。  

### 使い方  
1. **ボーンデータを取得したいアーマチュアを選択** します。  
2. **Nパネルの「DIVA」タブ** にある **Bone Position Rotation Scale** セクションで **Export Bone Data** ボタンをクリックします。  
3. 設定に応じてボーンデータファイルが出力されます。  

### 設定オプション  
- **File Name（ファイル名）**  
  - 保存するファイル名を入力してください（拡張子は不要）。  
  - デフォルトのままでも問題ありません。  
- **Export Path（保存場所）**  
  - フォルダアイコンをクリックして保存先を設定してください。  
  - デフォルトでは、現在作業中の `.blend` ファイルと同じフォルダに保存されます。  
- **Auto Open File（自動で開く）**  
  - エクスポート後、出力したファイルを**自動で開きたい場合** はチェックを付けてください。  
- **Overwrite Existing File（上書き保存の可否）**  
  - **既存ファイルを上書きしたくない場合** はチェックを外してください。  
  - チェックを外すと、既存ファイルがある場合はタイムスタンプ付きの新しいファイルとして保存されます。  
- **Export as JSON（JSON形式で保存）**  
  - **デフォルトではテキスト形式で保存** されます。  
  - **JSON形式で保存したい場合** はチェックを付けてください。  

### コードについて  
**Original script by Saltlapse.**  
Saltlapse氏が公開しているコード（[GitHubリポジトリ](https://github.com/Saltlapse/Blender-Mod-Scripts)）をBlenderアドオン化しました。  
アドオン化に際し、**元のスクリプトの構成はほぼそのまま維持** しつつ、いくつかの機能を加えています。  
許可をくださったSaltlapse氏に感謝します。
